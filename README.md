# VacationManager - Академічна система управління відпустками

## Опис

VacationManager - це гібридна десктоп/веб програма для університетської адміністрації, яка керує штатами академічних співробітників, генерує офіційні заяви на відпустку (.docx) та відстежує життєвий цикл документів від чернетки до цифрового архіву.

## Системні вимоги

- Python 3.10+
- PyQt6 (для десктоп додатку)
- Flask (для веб-додатку)
- SQLAlchemy
- python-docx

## Встановлення

1. Клонуйте репозиторій:
```bash
git clone <repository-url>
cd VacationManager
```

2. Створіть віртуальне середовище:
```bash
python -m venv venv
source venv/bin/activate  # для Linux/Mac
venv\Scripts\activate  # для Windows
```

3. Встановіть залежності:
```bash
pip install -r requirements.txt
```

## Запуск

### Десктоп додаток (PyQt6)

Для запуску десктопної версії, призначеної для HR/адміністрації:

```bash
python run_desktop.py
```

Функціонал десктоп додатку:
- Управління базою даних співробітників
- Створення заявок на відпустку
- Генерація документів .docx
- Відстеження статусів документів

### Веб додаток (Flask)

Для запуску веб-сервера для мобільного доступу:

```bash
python run_web.py
```

Доступ до мобільного додатку: http://localhost:5000

Функціонал веб-додатку:
- Перегляд статусів заявок
- Завантаження сканів підписаних документів через мобільні пристрої

## Структура проєкту

```
VacationManager/
├── app/
│   ├── __init__.py
│   ├── models.py       # SQLAlchemy моделі даних
│   ├── database.py     # Налаштування бази даних
│   └── logic.py        # Бізнес-логіка генерації документів
├── templates/          # Шаблони Word документів
├── scans/             # Збереження сканів підписаних документів
├── static/            # Статичні файли для веб додатку
├── config.py          # Конфігурація системи
├── gui_main.py        # PyQt6 десктоп додаток
├── web_app.py         # Flask веб додаток
├── run_desktop.py     # Запуск десктоп додатку
├── run_web.py         # Запуск веб додатку
└── requirements.txt   # Залежності Python
```

## База даних

Система використовує SQLite за замовчуванням. Для продуктивного використання рекомендується PostgreSQL.

Основні таблиці:
- `staff` - інформація про співробітників
- `leave_reasons` - бібліотека причин для неоплачуваної відпустки
- `vacation_requests` - заявки на відпустку та їх статуси

## Життєвий цикл заяви

1. **Створено** - Згенеровано документ .docx
2. **На підписі** - Очікування фізичного підпису
3. **Підписано** - Завантажено скан підписаного документа
4. **Додано до табелю** - Відображено в системі обліку робочого часу

## Типи відпусток

- **Оплачувана відпустка** - Стандартна щорічна відпустка з виплатою зарплати
- **Відпустка без збереження зарплати** - За власним рахунком з вказанням причини

## Правила розрахунку

- Виплата зарплати за оплачувану відпустку:
  - Дати 1-15 місяця: "у першій половині {місяця}"
  - Дати 16-31 місяця: "у другій половині {місяця}"
- Розрахунок днів відпустки включає початкову та кінцеву дати

## API endpoints

- `GET /api/requests/pending` - Отримати заявки зі статусом "На підписі"
- `POST /api/requests/<id>/upload-scan` - Завантажити скан підпису
- `GET /api/requests/<id>` - Деталі заявки
- `GET /api/staff` - Список співробітників
- `GET/POST /api/leave-reasons` - Бібліотека причин відпустки

## Налаштування

Налаштування системи знаходяться у файлі `config.py`:
- Підписанти документів
- Шляхи до файлів
- Типи зайнятості
- Посади
- Статуси документів

## Розробка

Для розробників:
- Використовуйте `init_db()` для ініціалізації бази даних
- Генерація документів відбувається через `generate_vacation_document()`
- Оновлення UI автоматично через 30 секунд для синхронізації з веб додатком